(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{94:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/watercolor-background.73882de6.png"},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(9),r=a.n(s),o=a(13),i=a(31),j=Object(i.b)({name:"user",initialState:{currentUser:null},reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload}}}),l=function(e){return e.user.currentUser},u=j.actions.setCurrentUser,b=j.reducer,d=Object(i.b)({name:"class",initialState:{classes:null,loadingClasses:!0},reducers:{setClasses:function(e,t){e.classes=t.payload,e.loadingClasses=!1}}}),O=function(e){return e.class.classes},h=function(e){return e.class.loadingClasses},x=d.actions.setClasses,g=d.reducer,p=a(16),f=a(134),m=a(135),v=a(2);var w=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),c=a[0],s=a[1],r={div:{borderColor:"black",borderWidth:"2px",borderRadius:"5px",backgroundColor:"rebeccapurple",padding:"10px",color:"antiquewhite",boxShadow:"0px 2px 8px grey",opacity:c,margin:"2px"}};return Object(n.useEffect)((function(){""!==e.message&&s(1),""===e.message&&s(0)}),[e.message]),Object(v.jsx)("div",{style:r.div,children:e.message})},y=a(12),N=a(18),C=a.n(N);function S(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("img",{src:a(94),style:{position:"absolute",width:"50%",left:"50%",transform:"translateX(-50%)",marginTop:"-2em"},alt:"watercolor"})})}var R=a(127);function k(){return Object(v.jsx)("div",{className:"login-jumbotron",children:Object(v.jsx)(R.a,{variant:"h1",className:"login-title",children:"Welcome"})})}var F=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],j=r[1],l=Object(n.useState)(""),b=Object(o.a)(l,2),d=b[0],h=b[1],x=Object(n.useState)(Object(v.jsx)(v.Fragment,{})),g=Object(o.a)(x,2),N=g[0],R=g[1],F=Object(y.g)(),E=Object(p.b)(),L=Object(p.c)(O);Object(n.useEffect)((function(){console.log(L)}),[L]);var P=function(e){if(e.preventDefault(),""===a||""===i)h("Neither username nor password may be blank.");else{var t={username:a,password:i};C.a.post("/api/login",t).then((function(e){C.a.get("/api/userdata").then((function(e){var t=e.data;t&&E(u(t))})).then((function(){R(Object(v.jsx)(y.a,{to:"/"}))})).catch((function(e){throw new Error(e)}))})).catch((function(e){"Request failed with status code 401"===e.message?h("Incorrect username or password."):console.error(e)}))}};return Object(n.useEffect)((function(){""!==d&&h("")}),[a,i]),Object(v.jsxs)(v.Fragment,{children:[N,Object(v.jsx)(k,{}),Object(v.jsx)(S,{}),Object(v.jsxs)("form",{onSubmit:P,children:[Object(v.jsx)("div",{className:L.formRow,children:Object(v.jsx)(f.a,{label:"Username",name:"username",onChange:function(e){return c(e.target.value)},type:"text"})}),Object(v.jsx)("div",{className:L.formRow,children:Object(v.jsx)(f.a,{label:"Password",onChange:function(e){return j(e.target.value)},type:"password",name:"password"})}),Object(v.jsx)("div",{className:L.formRow,children:Object(v.jsx)(m.a,{onClick:P,variant:"contained",color:"primary",type:"submit",children:"Log In"})}),Object(v.jsx)("div",{className:L.formRow,children:Object(v.jsx)(m.a,{onClick:function(e){e.preventDefault(),F.push("/signup")},variant:"contained",color:"secondary",children:"Sign Up Form"})}),Object(v.jsx)("div",{className:L.formRow,children:Object(v.jsx)(w,{message:d})}),Object(v.jsx)("div",{className:L.formRow,children:Object(v.jsx)(m.a,{variant:"outlined",onClick:function(){C.a.post("/api/login",{username:"1",password:"111111"}).then((function(e){C.a.get("/api/userdata").then((function(e){var t=e.data;t&&E(u(t))})).then((function(){R(Object(v.jsx)(y.a,{to:"/"}))})).catch((function(e){throw new Error(e)}))})).catch((function(e){"Request failed with status code 401"===e.message?h("Incorrect username or password."):console.error(e)}))},children:"Dev Login for protected route"})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:L.formRow,children:Object(v.jsx)("a",{href:"/loginstatus",children:"Go to page dependent on login status"})})]})]})},E=a(132),L=a(133);var P=function(e){var t=e.loading,a=e.user,c=Object(n.useState)(""),s=Object(o.a)(c,2),r=s[0],i=s[1],j=Object(n.useState)(""),l=Object(o.a)(j,2),u=l[0],b=l[1],d=Object(n.useState)(""),O=Object(o.a)(d,2),h=O[0],x=O[1],g=Object(y.g)();return Object(n.useEffect)((function(){""!==h&&x("")}),[r,u]),a&&!t?Object(v.jsx)(y.a,{to:"/home"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(k,{}),Object(v.jsx)(S,{}),Object(v.jsx)(E.a,{className:"loginSignupContainer",children:Object(v.jsxs)("form",{children:[Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{children:Object(v.jsx)(f.a,{label:"Username",name:"username",onChange:function(e){return i(e.target.value)},type:"text",placeholder:""})}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{children:Object(v.jsx)(f.a,{label:"Password",onChange:function(e){return b(e.target.value)},type:"password",placeholder:"password",name:"password"})}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{children:Object(v.jsx)(m.a,{className:"signupLoginBtns",onClick:function(e){if(e.preventDefault(),""===r||""===u)x("Neither username nor password may be blank.");else{var t={username:r,password:u};C.a.post("api/users",t).then((function(e){"That username already exists!"===e.data||"Password must be at least 6 characters."===e.data?x(e.data):g.push("/login")})).catch((function(e){console.error(e),x("Signup unsuccessful, unknown error.")}))}},variant:"contained",color:"secondary",type:"submit",children:"Sign up"})}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{children:Object(v.jsx)(m.a,{className:"signupLoginBtns",onClick:function(e){e.preventDefault(),g.push("/login")},variant:"contained",color:"primary",type:"submit",children:"Go to Log In Form"})}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{}),Object(v.jsx)(L.a,{children:Object(v.jsx)(w,{message:h})}),Object(v.jsx)(L.a,{})]})})]})},U=a(28);function T(){var e=Object(p.b)(),t=Object(p.c)(O);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R.a,{variant:"h3",align:"center",gutterBottom:!0,children:"This page is protected by ProtectedRoute.js, and is only reachable when logged in."}),Object(v.jsx)("div",{className:t.formRow,children:Object(v.jsx)(m.a,{variant:"outlined",color:"primary",onClick:function(){C.a.get("api/logout").then((function(){e(u(null))}))},children:"log out"})})]})}function I(){return Object(v.jsx)("h1",{className:"four-oh-four",children:"404: Page Not Found!"})}var D=a(60),B=a(3),q=a(61),G=a.n(q),J=function(e){var t=e.onFailureRedirectToPath,a=void 0===t?"/login":t,n=e.isLoading,c=e.user,s=Object(B.a)(e,["onFailureRedirectToPath","isLoading","user"]);return n?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"loading",children:Object(v.jsx)("div",{className:"loading-bottom",children:Object(v.jsx)("div",{className:"loading-bars",children:Object(v.jsx)(G.a,{color:"rgb(180, 180, 180)",height:200,width:200,type:"cubes"})})})})}):c?Object(v.jsx)(y.b,Object(D.a)({},s)):Object(v.jsx)(y.a,{to:a})},W=a(131);function Y(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],s=a[1],r=Object(p.b)(),i=Object(p.c)(l),j=(Object(p.c)(O),function(){C.a.get("api/logout").then((function(){r(u(null))})).catch((function(e){console.error(e)}))});return Object(n.useEffect)((function(){s(i?Object(v.jsxs)(W.a,{elevation:3,className:"home",children:[Object(v.jsxs)(R.a,{variant:"body1",className:"paper-p",children:['You are logged in as user "',i.username,'".']}),Object(v.jsx)(m.a,{variant:"contained",onClick:j,children:"log out"})]}):Object(v.jsxs)(W.a,{className:"home",children:[Object(v.jsx)(R.a,{variant:"body1",className:"paper-p",children:"You are not logged in."}),Object(v.jsx)(R.a,{variant:"body1",className:"paper-p",children:Object(v.jsx)("a",{href:"/login",children:"Go to login page"})})]}))}),[i]),e.loading?Object(v.jsx)(v.Fragment,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h5",{className:"text-center",children:"The below paragraph changes depending on whether a user is currently logged in."}),c]})}var A=a(5),M=Object(A.a)({form:{display:"flex",alignItems:"baseline",justifyContent:"space-evenly"},formRow:{display:"flex",justifyContent:"center"}})((function(e){var t=Object(p.b)(),a=Object(n.useState)(!0),c=Object(o.a)(a,2),s=c[0],r=c[1],i=Object(p.c)(l),j=e.classes,b=Object(p.c)(h);return Object(n.useEffect)((function(){C.a.get("/api/userdata").then((function(e){var a=e.data;a&&t(u(a)),r(!1)})).catch((function(e){console.error(e)}))}),[]),Object(n.useEffect)((function(){console.log(j),console.log(b),t(x(j))}),[j]),b?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(U.a,{children:Object(v.jsxs)(y.d,{children:[Object(v.jsx)(J,{exact:!0,path:"/",user:i,isLoading:s,onFailureRedirectToPath:"/login",children:Object(v.jsx)(T,{})}),Object(v.jsx)(y.b,{exact:!0,path:"/login",children:Object(v.jsx)(F,{})}),Object(v.jsx)(y.b,{exact:!0,path:"/signup",children:Object(v.jsx)(P,{})}),Object(v.jsx)(y.b,{exact:!0,path:"/loginstatus",children:Object(v.jsx)(Y,{loading:s})}),Object(v.jsx)(y.b,{path:"/",children:Object(v.jsx)(I,{})})]})})})})),X=(a(96),Object(i.a)({reducer:{class:g,user:b}}));r.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(p.a,{store:X,children:Object(v.jsx)(M,{})})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.ca8be00f.chunk.js.map